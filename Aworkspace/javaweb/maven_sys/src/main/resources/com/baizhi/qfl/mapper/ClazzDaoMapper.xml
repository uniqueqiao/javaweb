<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.baizhi.qfl.dao.ClazzDao">
   <resultMap id="cl" type="Clazz">
        <id column="cid" property="id"></id>
        <result column="cname" property="name"></result>
        <result column="cpath" property="path"></result>
        <association property="tag" javaType="Tag">
            <id column="tid" property="id"></id>
            <result column="tname" property="name"></result>
        </association>
   </resultMap>
   <select id="selectAll"  resultMap="cl">
        select c.id cid , c.name cname,c.path cpath, t.id tid ,t.name tname
        from t_clazz c left join t_tag t
        on c.tagId=t.id
   </select>
    <select id="queryAll"  resultType="Clazz">
        select id  , name ,path
        from t_clazz
    </select>
    <select id="selectByName" resultMap="cl">
        select c.id cid , c.name cname,c.path cpath, t.id tid ,t.name tname
        from t_clazz c left join t_tag t
        on c.tagId=t.id
        where c.name=#{name}
    </select>
    <select id="selectById" resultMap="cl">
        select c.id cid , c.name cname,c.path cpath, t.id tid ,t.name tname
        from t_clazz c left join t_tag t
        on c.tagId=t.id
        where c.id=#{id}
    </select>
    <insert id="insert" parameterType="Clazz">
        insert into t_clazz(name,path,tagId) values (#{name},#{path},#{tag.id})
    </insert>
    <delete id="delete" parameterType="Integer">
        delete from t_clazz where id=#{id}
    </delete>
</mapper>
